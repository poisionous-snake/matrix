// Generated by CIRCT firtool-1.62.1
// Standard header to adapt well known macros for prints and assertions.

// Users can define 'PRINTF_COND' to add an extra gate to prints.
// Standard header to adapt well known macros for register randomization.
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_

// Include register initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Include rmemory initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_MEM_
    `define ENABLE_INITIAL_MEM_
  `endif // not def ENABLE_INITIAL_MEM_
`endif // not def SYNTHESIS

`ifndef PRINTF_COND_
  `ifdef PRINTF_COND
    `define PRINTF_COND_ (`PRINTF_COND)
  `else  // PRINTF_COND
    `define PRINTF_COND_ 1
  `endif // PRINTF_COND
`endif // not def PRINTF_COND_

module fp16Add(	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:11:7]
  input         clock,	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:11:7]
                reset,	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:11:7]
  input  [15:0] io_a,	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:12:16]
                io_b,	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:12:16]
  output [15:0] io_out	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:12:16]
);

  wire [5:0]  _expDiff_T_7 = {1'h0, io_a[14:10]} + {1'h1, ~(io_b[14:10])} + 6'h1;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:{22,34,44,49,60,62,72}, :27:54]
  wire [10:0] _manDiff_T_7 = {1'h0, io_a[9:0]} + {1'h1, ~(io_b[9:0])} + 11'h1;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:{22,49}, :20:{34,42,58,60,68}]
  wire        expDiffIsZero = _expDiff_T_7 == 6'h0;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:72, :22:34]
  wire        bigSel = expDiffIsZero ? _manDiff_T_7[10] : _expDiff_T_7[5];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:72, :20:68, :22:34, :25:{21,44,57}]
  wire [4:0]  rawShiftRt =
    _expDiff_T_7[5] ? ~(_expDiff_T_7[4:0]) + 5'h1 : _expDiff_T_7[4:0];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:72, :25:57, :27:{25,39,47,54}, :38:94]
  wire        _casez_sel_T = rawShiftRt > 5'hB;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:27:25, :28:37]
  wire [3:0]  shiftRtAmt = _casez_sel_T ? 4'hB : rawShiftRt[3:0];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:27:25, :28:{25,37,71}]
  wire        operation = io_a[15] ^ io_b[15];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:30:{22,27,30}]
  wire        signOut = bigSel ? io_b[15] : io_a[15];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:25:21, :30:{22,30}, :33:22]
  wire [9:0]  _bigMan_T_2 = bigSel ? io_b[9:0] : io_a[9:0];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:20:{34,60}, :25:21, :34:35]
  wire [10:0] lilMan = {1'h1, bigSel ? io_a[9:0] : io_b[9:0]};	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:49, :20:{34,60}, :25:21, :35:{21,35}]
  wire [10:0] shiftedMan = lilMan >> shiftRtAmt;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:28:25, :35:21, :37:30]
  wire [10:0] _guard_T_5 = lilMan >> shiftRtAmt - 4'h1;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:28:25, :35:21, :38:{80,94}]
  wire        guard = ~(shiftRtAmt == 4'h0 | _casez_sel_T) & _guard_T_5[0];	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:28:{25,37}, :38:{20,32,40,80,100}, src/main/scala/chisel3/util/Mux.scala:50:70]
  wire [4:0]  casez_sel = {shiftRtAmt, _casez_sel_T};	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:28:{25,37}, :41:24]
  wire [10:0] _sticky_T =
    lilMan
    & (casez_sel == 5'h0 | casez_sel == 5'h2
         ? 11'h0
         : casez_sel == 5'h4
             ? 11'h1
             : casez_sel == 5'h6
                 ? 11'h3
                 : casez_sel == 5'h8 | casez_sel == 5'hA
                     ? 11'hF
                     : casez_sel == 5'hC
                         ? 11'h1F
                         : casez_sel == 5'hE
                             ? 11'h3F
                             : casez_sel == 5'h10
                                 ? 11'h7F
                                 : casez_sel == 5'h12
                                     ? 11'hFF
                                     : casez_sel == 5'h14
                                         ? 11'h1FF
                                         : casez_sel == 5'h16
                                             ? 11'h3FF
                                             : {11{_casez_sel_T}});	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:20:68, :27:54, :28:37, :35:21, :41:24, :43:20, :44:20, :45:20, :46:20, :47:20, :48:20, :49:20, :50:20, :51:20, :52:20, :53:20, :54:20, :58:26, src/main/scala/chisel3/util/Mux.scala:126:16]
  wire [12:0] alignedMan =
    operation ? ~{shiftedMan, guard, |_sticky_T} : {shiftedMan, guard, |_sticky_T};	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:30:27, :37:30, :38:20, :58:{26,34}, :59:25, :60:{25,29}, :61:29]
  wire [13:0] rawMan =
    {1'h0, alignedMan + {12'h0, operation}} + {2'h1, _bigMan_T_2, 2'h0};	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:22, :30:27, :34:35, :59:25, :65:{30,50,56}]
  wire        _signedMan_T_2 = rawMan[13] & ~operation;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:30:27, :65:50, :69:{31,36,39}]
  wire [3:0]  normAmt =
    _signedMan_T_2
      ? 4'h0
      : rawMan[12]
          ? 4'h1
          : rawMan[11]
              ? 4'h2
              : rawMan[10]
                  ? 4'h3
                  : rawMan[9]
                      ? 4'h4
                      : rawMan[8]
                          ? 4'h5
                          : rawMan[7]
                              ? 4'h6
                              : rawMan[6]
                                  ? 4'h7
                                  : rawMan[5]
                                      ? 4'h8
                                      : rawMan[4]
                                          ? 4'h9
                                          : rawMan[3]
                                              ? 4'hA
                                              : rawMan[2] ? 4'hB : {3'h6, ~(rawMan[1])};	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:8:52, :28:37, :47:20, :48:20, :65:50, :69:36, src/main/scala/chisel3/util/Mux.scala:50:70]
  wire [5:0]  _normExp_T_4 =
    {1'h0, (bigSel ? io_b[14:10] : io_a[14:10]) + 5'h1} + {2'h3, ~normAmt} + 6'h1;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:{22,34,62}, :25:21, :27:54, :32:21, :38:94, :81:26, :83:{27,30,54}, src/main/scala/chisel3/util/Mux.scala:50:70]
  wire [29:0] _normMan_T = {16'h0, _signedMan_T_2, rawMan[12:0]} << normAmt;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:65:50, :69:{36,57}, :86:28, :127:36, src/main/scala/chisel3/util/Mux.scala:50:70]
  wire        AIsInf = (&(io_a[14:10])) & ~(|(io_a[9:0]));	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:34, :20:34, :97:31, :101:{22,31}, :105:28]
  wire        BIsInf = (&(io_b[14:10])) & ~(|(io_b[9:0]));	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:62, :20:60, :98:31, :102:{22,31}, :106:28]
  wire        zero = expDiffIsZero & _manDiff_T_7 == 11'h0 & operation;	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:20:68, :22:34, :23:34, :30:27, :110:47, src/main/scala/chisel3/util/Mux.scala:126:16]
  `ifndef SYNTHESIS	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:66:11]
    always @(posedge clock) begin	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:66:11]
      if ((`PRINTF_COND_) & ~reset) begin	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:66:11, :129:11]
        $fwrite(32'h80000002, "alignedMan: %b, bigMan: %b, rawMan: %b\n", alignedMan,
                {1'h1, _bigMan_T_2, 2'h0}, rawMan);	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:19:49, :34:35, :59:25, :65:{50,56}, :66:11]
        $fwrite(32'h80000002, "normAmt: %b\n", normAmt);	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:66:11, :79:11, src/main/scala/chisel3/util/Mux.scala:50:70]
        $fwrite(32'h80000002, "io.a: %b, io.b: %b, io.out: %b_%b_%b\n", io_a, io_b,
                signOut, _normExp_T_4[4:0], _normMan_T[12:3]);	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:33:22, :66:11, :83:27, :84:25, :86:{28,39}, :87:25, :129:11]
      end
    end // always @(posedge)
  `endif // not def SYNTHESIS
  assign io_out =
    (&(io_a[14:10])) & (|(io_a[9:0])) | (&(io_b[14:10])) & (|(io_b[9:0])) | AIsInf
    & BIsInf & operation
      ? 16'h7FFF
      : (AIsInf | BIsInf | (&(_normExp_T_4[4:0])) & ~(_normExp_T_4[5])) & ~zero
          ? {signOut, 15'h7C00}
          : io_a[14:10] == 5'h0 | io_b[14:10] == 5'h0 | _normExp_T_4[4:0] == 5'h0
            | _normExp_T_4[5] | zero
              ? 16'h0
              : {signOut, _normExp_T_4[4:0], _normMan_T[12:3]};	// @[home/yzy/chisel-playground/playground/src/fp16Add.scala:11:7, :19:{34,62}, :20:{34,60}, :27:54, :30:27, :33:22, :83:27, :84:25, :86:{28,39}, :87:25, :97:31, :98:31, :99:33, :100:33, :101:31, :102:31, :103:28, :104:28, :105:28, :106:28, :107:{36,57}, :110:47, :113:30, :114:32, :116:{32,35,43}, :120:{30,43,45}, :122:46, :125:18, :126:{24,38}, :127:36, :128:48]
endmodule

